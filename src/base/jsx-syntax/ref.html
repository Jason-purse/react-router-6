<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ref</title>
</head>
<body>

<div id="app"></div>
<script src="../../common/prop-types.js" type="text/javascript"></script>
<script src="../../common/react.development.js" type="text/javascript"></script>
<script src="../../common/react-dom.development.js" type="text/javascript"></script>
<script src="../../common/babel.min.js" type="text/javascript"></script>
<script type="text/babel">
    let e = React.createElement;

    class App extends React.Component {
        constructor(props) {
            super(props);
            this.containerRef = null;
            this.state = {
                value: "default values"
            }
            this.secondContainerRef = null;
            this.setSecondContainerRef = this.setSecondContainerRef.bind(this)
            this.threeContainerRef = React.createRef()
        }

        setSecondContainerRef(ref) {
            console.log(`second ref ${ref}`)
            this.secondContainerRef = ref;
        }
        render() {
            return (
                <div>
                    <button onClick={() => this.setState({value: "new Value"})}>点击触发刷新</button>
                    <div ref={(ref) => {
                        console.log(ref)
                        this.containerRef = ref
                    }}>
                        {this.state.value}
                    </div>

                    <div ref={this.setSecondContainerRef}>
                       second container ref
                    </div>
                    <div ref={this.threeContainerRef}>
                        three container ref
                    </div>

                    {console.log("render ....")}
                    <div>
                        <p>{`${this.containerRef && this.containerRef.textContent}` } </p>

                       <p> {`${this.secondContainerRef && this.secondContainerRef.textContent}`}   </p>

                        <p>{`${this.threeContainerRef.current && this.threeContainerRef.current.textContent}` }</p>

                    </div>
                </div>
            )
        }

        componentDidMount() {
            console.log("组件挂载了 ...")
            console.log("three container ref" + this.threeContainerRef.current.tagName)
        }
    }





    ReactDOM.render(<App />, document.querySelector("#app"))
</script>
</body>
</html>
